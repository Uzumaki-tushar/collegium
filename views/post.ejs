<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>

    <%- include('./partials/headers.ejs') %>

    <div class="w-full min-h-screen bg-zinc-900 text-white p-8">
        <div class=" flex w-full justify-between">
            <h2 class="text-3xl mb-2 text-center">All Posts</h2>
           
        </div>

        <div class="posts mt-6">
            <div class="postcontainer mt-5">
                    <%  allPost.forEach((post)=>{  %>
                    <%    let postUser;    %>
                        <% allUsers.forEach((ele)=>{ %>
                            <% if(post.user==ele.id) postUser=ele   %>
                    <%    })  %>
                        <div class="post w-2/3 p-4 border-2 border-zinc-700 bg-zinc-800 mb-3">
                            <h4 class="text-blue-400 mb-2">@<%= postUser.username %> </h4>
                            <h2 class="underline"> <%= post.title %> </h2>
                            <p class="text-sm tracking-tight"> <%= post.content %> </p>
                            <small> <%= post.likes.length %> Likes</small>
                            <div class="btns flex gap-5 mt-2">
                                <a href="/posts/like/<%=post._id %>" class="text-blue-500">
                                    <%= post.likes.indexOf(user.id)>=0? "Unlike" : "Like" %>
                                   </a>
                            </div>
                        </div>

                    <% })   %>

                        
            </div>
        </div>





    </div>
</body>
</html>